(this.webpackJsonppiggy=this.webpackJsonppiggy||[]).push([[0],{196:function(e,t,n){},335:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(29),r=n.n(s),i=(n(196),n(343)),d=n(16),o=n(342),l=n(68),u=n(54),j=n(344),h=n(345),b=function(){return Object(u.c)()},O=u.d,x=n(132),m=n(55),v={accounts:JSON.parse(localStorage.getItem("accounts")||"[]")},f=Object(m.c)({name:"account",initialState:v,reducers:{addAccount:function(e,t){var n=Object(x.a)(Object(x.a)({},t.payload),{},{investments:[]});e.accounts.push(n)},addInvestment:function(e,t){var n=t.payload,c=n.accountId,a=n.investment,s=e.accounts[c].investments;s.push(a),s.sort((function(e,t){return e.date-t.date})),e.accounts[c].investments=s},deleteInvestment:function(e,t){var n=t.payload,c=n.accountId,a=n.investmentId;e.accounts[c].investments.splice(a,1)}}}),g=f.actions,p=g.addAccount,y=g.addInvestment,A=g.deleteInvestment,w=f.reducer,C=n(1),I=function(e){var t=b(),n=e.accountId,a=e.isAddingInvestment,s=e.setIsAddingInvestment,r=Object(c.useState)((new Date).toISOString().split("T")[0]),i=Object(d.a)(r,2),o=i[0],u=i[1],x=Object(c.useState)(null),m=Object(d.a)(x,2),v=m[0],f=m[1],g=Object(c.useState)(null),p=Object(d.a)(g,2),A=p[0],w=p[1],I=O((function(e){return 0===e.account.accounts[n].investments.length}));return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(j.a,{show:a,onHide:s,children:[Object(C.jsxs)(j.a.Header,{children:[Object(C.jsx)(j.a.Title,{children:"Add investment"}),Object(C.jsx)(l.a,{variant:"link",onClick:s,children:"Close"})]}),Object(C.jsx)(j.a.Body,{children:Object(C.jsxs)(h.a,{children:[Object(C.jsxs)(h.a.Group,{className:"mb-3",children:[Object(C.jsx)(h.a.Label,{children:"Investment date"}),Object(C.jsx)(h.a.Control,{type:"date",value:o,onChange:function(e){var t=e.target.value;u(t)}}),Object(C.jsx)(h.a.Text,{className:"text-muted",children:I?"If you know (roughly) the total amount of cash that you have added in the lifetime of your account, you may enter it here. Otherwise, enter the total account value in both of these boxes.":"The amount of cash that you added to this account since the last investment that you recorded"})]}),Object(C.jsxs)(h.a.Group,{className:"mb-3",children:[Object(C.jsx)(h.a.Label,{children:"Cash added"}),Object(C.jsx)(h.a.Control,{type:"number",value:null===v?"":v,onChange:function(e){if(""!==e.target.value){var t=parseFloat(e.target.value);isNaN(t)||f(t)}else f(null)}}),Object(C.jsx)(h.a.Text,{className:"text-muted",children:I?"If you know (roughly) the total amount of cash that you have added in the lifetime of your account, you may enter it here. Otherwise, enter the total account value in both of these boxes.":"The amount of cash that you added to this account since the last investment that you recorded"})]}),Object(C.jsxs)(h.a.Group,{className:"mb-3",children:[Object(C.jsx)(h.a.Label,{children:"New total value"}),Object(C.jsx)(h.a.Control,{type:"number",value:null===A?"":A,onChange:function(e){if(""!==e.target.value){var t=parseFloat(e.target.value);isNaN(t)||w(t)}else w(null)}}),Object(C.jsx)(h.a.Text,{className:"text-muted",children:"The new total value of your account (including the cash that you have recently added)"})]})]})}),Object(C.jsxs)(j.a.Footer,{children:[Object(C.jsx)(l.a,{variant:"outline-secondary",onClick:s,children:"Cancel"}),Object(C.jsx)(l.a,{variant:"primary",onClick:function(e){e.preventDefault(),t(y({accountId:n,investment:{date:new Date(o).getTime(),cashAdded:v,totalValue:A}})),s()},disabled:null===v||null===A,children:"Add"})]})]})})},N=n(348),k=n(338),S=n(183),D=n(184),T=n(187),F=function(e){var t=e.title,n=e.data,c=e.lines,a=["#8884d8","#82ca9d"];return Object(C.jsxs)(C.Fragment,{children:[t&&Object(C.jsx)("h4",{children:t}),Object(C.jsxs)(k.a,{width:700,height:300,data:n,className:"mb-3 graph-wrapper",children:[Object(C.jsx)(S.a,{dataKey:"date",type:"number",domain:["0","dataMax"],tickFormatter:function(e){return new Date(e).toLocaleDateString()}}),Object(C.jsx)(D.a,{}),c.map((function(e,t){return Object(C.jsx)(T.a,{type:"monotone",dataKey:e,stroke:a[t]},e)}))]})]})},V=function(e){for(var t=b(),n=e.accountId,c=O((function(e){return e.account.accounts[n].investments})),a=c.map((function(e,t){return function(e){var t=c[e],n=0===e?0:c[e-1].totalValue;return 1+(t.totalValue-n-t.cashAdded)/(n+t.cashAdded)}(t)})).reduce((function(e,t){return e*t}),1)-1,s=c.map((function(e){return{date:e.date,cashAdded:e.cashAdded,totalValue:e.totalValue}})),r=s.length>0?(s[s.length-1].date-s[0].date)/864e5:365,i=Math.pow(1+a,365/r)-1,d=1;d<c.length;d++){var u=s[d],j=s[d-1];u.cashAdded+=j.cashAdded}return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"mb-3 col-sm-6",children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)(N.a.Header,{children:Object(C.jsx)("div",{children:"Time-weighted return"})}),Object(C.jsx)(N.a.Body,{children:Object(C.jsx)("div",{children:Object(C.jsxs)("h1",{children:[(100*a).toFixed(2),"%"]})})})]})}),Object(C.jsx)("div",{className:"mb-3 col-sm-6",children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)(N.a.Header,{children:Object(C.jsx)("div",{children:"Annualized return"})}),Object(C.jsx)(N.a.Body,{children:Object(C.jsx)("div",{children:Object(C.jsxs)("h1",{children:[(100*i).toFixed(2),"%"]})})})]})})]}),Object(C.jsx)(F,{data:s,lines:["cashAdded","totalValue"]}),Object(C.jsxs)(o.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Date"}),Object(C.jsx)("th",{children:"Cash added"}),Object(C.jsx)("th",{children:"Account value"}),Object(C.jsx)("th",{})]})}),Object(C.jsx)("tbody",{children:c.map((function(e,c){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),Object(C.jsxs)("td",{children:["$",e.cashAdded]}),Object(C.jsxs)("td",{children:["$",e.totalValue]}),Object(C.jsx)("td",{children:Object(C.jsx)(l.a,{onClick:function(){return t(A({accountId:n,investmentId:c}))},variant:"outline-danger",children:"Delete"})})]},"investment-".concat(n,"-").concat(c))}))})]})]})},B=function(e){var t=e.accountId,n=e.account,a=e.setIsShowingAccountDetails,s=Object(c.useState)(!1),r=Object(d.a)(s,2),i=r[0],o=r[1],u=void 0!==t;return void 0===n||void 0===t?Object(C.jsx)(C.Fragment,{}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(j.a,{show:u,onHide:a,children:[Object(C.jsxs)(j.a.Header,{children:[Object(C.jsx)(j.a.Title,{children:n.name}),Object(C.jsx)(l.a,{variant:"outline-success",onClick:function(){return o(!0)},children:"Add investment"}),Object(C.jsx)(l.a,{variant:"link",onClick:a,children:"Close"})]}),Object(C.jsxs)(j.a.Body,{children:[Object(C.jsx)("p",{children:n.description}),Object(C.jsx)(V,{accountId:t})]})]}),Object(C.jsx)(I,{accountId:t,isAddingInvestment:i,setIsAddingInvestment:function(){return o(!1)}})]})},H=Object(u.b)((function(e){return{accounts:e.account.accounts}}))((function(e){var t=e.accounts,n=Object(c.useState)(void 0),a=Object(d.a)(n,2),s=a[0],r=a[1],i=Object(c.useState)(!1),u=Object(d.a)(i,2),j=u[0],h=u[1],b=t.map((function(e){return 0===e.investments.length?void 0:e.investments[e.investments.length-1]}));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(o.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Account"}),Object(C.jsx)("th",{children:"Type"}),Object(C.jsx)("th",{children:"Value"}),Object(C.jsx)("th",{children:"Last update"}),Object(C.jsx)("th",{})]})}),Object(C.jsx)("tbody",{children:t.map((function(e,t){var n,c,a;return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.name}),Object(C.jsx)("td",{children:e.isCash?"Cash":"Brokerage"}),Object(C.jsxs)("td",{children:["$",null===(n=b[t])||void 0===n?void 0:n.totalValue]}),Object(C.jsx)("td",{children:(a=null===(c=b[t])||void 0===c?void 0:c.date,void 0===a?"":new Date(a).toLocaleDateString())}),Object(C.jsxs)("td",{children:[Object(C.jsx)(l.a,{onClick:function(){r(t),h(!0)},variant:"primary",children:"Update"}),Object(C.jsx)(l.a,{className:"mx-3",onClick:function(){return r(t)},variant:"outline-primary",children:"Details"})]})]},"account-".concat(t))}))})]}),!j&&Object(C.jsx)(B,{accountId:s,account:void 0===s?void 0:t[s],setIsShowingAccountDetails:function(){return r(void 0)}}),void 0!==s&&Object(C.jsx)(I,{accountId:s,isAddingInvestment:j,setIsAddingInvestment:function(){h(!1),r(void 0)}})]})})),L=n(346),G=function(e){var t=e.isAddingAccount,n=e.setIsAddingAccount,a=Object(c.useState)(""),s=Object(d.a)(a,2),r=s[0],i=s[1],o=Object(c.useState)(""),u=Object(d.a)(o,2),O=u[0],x=u[1],m=Object(c.useState)(!1),v=Object(d.a)(m,2),f=v[0],g=v[1],y=b();return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(j.a,{show:t,onHide:n,children:[Object(C.jsx)(j.a.Header,{children:Object(C.jsx)(j.a.Title,{children:"Add account"})}),Object(C.jsx)(j.a.Body,{children:Object(C.jsxs)(h.a,{children:[Object(C.jsxs)(h.a.Group,{className:"mb-3",children:[Object(C.jsx)(h.a.Label,{children:"Account name"}),Object(C.jsx)(h.a.Control,{type:"text",placeholder:"Robinhood cash account",value:r,onChange:function(e){return i(e.target.value)}})]}),Object(C.jsxs)(h.a.Group,{className:"mb-3",children:[Object(C.jsx)(h.a.Label,{children:"Account description"}),Object(C.jsx)(h.a.Control,{as:"textarea",type:"text",placeholder:"Description",value:O,onChange:function(e){return x(e.target.value)}}),Object(C.jsx)(h.a.Text,{className:"text-muted",children:"Optionally include a description of how you use your account"})]}),Object(C.jsx)(h.a.Group,{className:"mb-3",children:Object(C.jsx)(h.a.Check,{type:"checkbox",label:"This is a cash account",checked:f,onChange:function(e){return g(e.target.checked)}})}),Object(C.jsx)(l.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),i(""),x(""),y(p({name:r,description:O,isCash:f}))},disabled:0===r.length,children:"Add"})]})})]})})},$=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],s=O((function(e){return e.account})),r=function(e){e&&e.preventDefault(),localStorage.setItem("accounts",JSON.stringify(s.accounts))};return Object(c.useEffect)((function(){r(void 0)})),Object(C.jsxs)(L.a,{bg:"light",expand:"lg",className:"mb-3",children:[Object(C.jsxs)(i.a,{className:"justify-content-between",children:[Object(C.jsx)(l.a,{variant:"primary",onClick:function(){return a(!0)},children:"Add account"}),Object(C.jsx)(l.a,{variant:"outline-success",onClick:r,children:"Save"})]}),Object(C.jsx)(G,{isAddingAccount:n,setIsAddingAccount:function(){return a(!1)}})]})},z=function(){for(var e=O((function(e){return e.account.accounts.filter((function(e){return e.investments.length>0}))})),t=e.filter((function(e){return!e.isCash})).reduce((function(e,t){return e.concat(t.investments)}),[]).sort((function(e,t){return e.date-t.date})),n=t.map((function(e,n){return function(e){var n=t[e],c=0===e?0:t[e-1].totalValue;return 1+(n.totalValue-c-n.cashAdded)/(c+n.cashAdded)}(n)})).reduce((function(e,t){return e*t}),1)-1,c=t.map((function(e){return{date:e.date,cashAdded:e.cashAdded,totalValue:e.totalValue}})),a=c.length>0?(c[c.length-1].date-c[0].date)/31536e6:0,s=100*(0===a?n:Math.pow(1+n,1/a)-1),r=1;r<t.length;r++){var i=c[r],d=c[r-1];i.cashAdded+=d.cashAdded}var o=e.filter((function(e){return e.isCash})),l=o.reduce((function(e,t){return e.concat(t.investments)}),[]).sort((function(e,t){return e.date-t.date})),u=o.map((function(e){return e.investments.length>0?e.investments[e.investments.length-1].totalValue:0})).reduce((function(e,t){return e+t}),0);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"mb-3 col-sm-3",children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)(N.a.Header,{children:Object(C.jsx)("div",{children:"Time-weighted return"})}),Object(C.jsx)(N.a.Body,{children:Object(C.jsx)("div",{children:Object(C.jsxs)("h1",{children:[(100*n).toFixed(2),"%"]})})})]})}),Object(C.jsx)("div",{className:"mb-3 col-sm-3",children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)(N.a.Header,{children:Object(C.jsx)("div",{children:"Annualized return"})}),Object(C.jsx)(N.a.Body,{children:Object(C.jsx)("div",{children:Object(C.jsxs)("h1",{children:[s.toFixed(2),"%"]})})})]})}),Object(C.jsx)("div",{className:"mb-3 col-sm-3",children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)(N.a.Header,{children:Object(C.jsx)("div",{children:"Cash on hand"})}),Object(C.jsx)(N.a.Body,{children:Object(C.jsx)("div",{children:Object(C.jsxs)("h1",{children:["$",u]})})})]})})]}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-sm-6",children:Object(C.jsx)(F,{title:"Brokerage",data:c,lines:["cashAdded","totalValue"]})}),Object(C.jsx)("div",{className:"col-sm-6",children:Object(C.jsx)(F,{title:"Cash",data:l,lines:["totalValue"]})})]})]})};var J=function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)($,{}),Object(C.jsxs)(i.a,{children:[Object(C.jsx)(z,{}),Object(C.jsx)(H,{})]})]})},M=n(67),E=n.n(M),K=n(185);function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var W=Object(m.b)("counter/fetchCount",function(){var e=Object(K.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=Object(m.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(W.pending,(function(e){e.status="loading"})).addCase(W.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),U=P.actions,q=(U.increment,U.decrement,U.incrementByAmount,P.reducer),Q=Object(m.a)({reducer:{counter:q,account:w}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(u.a,{store:Q,children:Object(C.jsx)(J,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[335,1,2]]]);
//# sourceMappingURL=main.d4e7ad69.chunk.js.map