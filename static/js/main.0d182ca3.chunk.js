(this.webpackJsonppiggy=this.webpackJsonppiggy||[]).push([[0],{209:function(e,t,n){},350:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(35),i=n.n(s),r=(n(209),n(15)),d=n(360),o=n(358),l=n(39),u=n(63),j=n(361),h=n(362),b=function(){return Object(u.c)()},O=u.d,x=n(146),m=n(64),v={accounts:JSON.parse(localStorage.getItem("accounts")||"[]")},f=Object(m.c)({name:"account",initialState:v,reducers:{setState:function(e,t){e.accounts=t.payload.state.accounts},addAccount:function(e,t){var n=Object(x.a)(Object(x.a)({},t.payload),{},{investments:[]});e.accounts.push(n)},addInvestment:function(e,t){var n=t.payload,c=n.accountId,a=n.investment,s=e.accounts[c].investments;s.push(a),s.sort((function(e,t){return e.date-t.date})),e.accounts[c].investments=s},deleteInvestment:function(e,t){var n=t.payload,c=n.accountId,a=n.investmentId;e.accounts[c].investments.splice(a,1)}}}),g=f.actions,p=g.setState,y=g.addAccount,A=g.addInvestment,C=g.deleteInvestment,w=f.reducer,S=n(2),I=function(e){var t=b(),n=e.accountId,a=e.isAddingInvestment,s=e.setIsAddingInvestment,i=Object(c.useState)((new Date).toISOString().split("T")[0]),d=Object(r.a)(i,2),o=d[0],u=d[1],x=Object(c.useState)(null),m=Object(r.a)(x,2),v=m[0],f=m[1],g=Object(c.useState)(null),p=Object(r.a)(g,2),y=p[0],C=p[1],w=O((function(e){return 0===e.account.accounts[n].investments.length}));return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(j.a,{show:a,onHide:s,children:[Object(S.jsxs)(j.a.Header,{children:[Object(S.jsx)(j.a.Title,{children:"Add investment"}),Object(S.jsx)(l.a,{variant:"link",onClick:s,children:"Close"})]}),Object(S.jsx)(j.a.Body,{children:Object(S.jsxs)(h.a,{children:[Object(S.jsxs)(h.a.Group,{className:"mb-3",children:[Object(S.jsx)(h.a.Label,{children:"Investment date"}),Object(S.jsx)(h.a.Control,{type:"date",value:o,onChange:function(e){var t=e.target.value;u(t)}}),Object(S.jsx)(h.a.Text,{className:"text-muted",children:w?"If you know (roughly) the total amount of cash that you have added in the lifetime of your account, you may enter it here. Otherwise, enter the total account value in both of these boxes.":"The amount of cash that you added to this account since the last investment that you recorded"})]}),Object(S.jsxs)(h.a.Group,{className:"mb-3",children:[Object(S.jsx)(h.a.Label,{children:"Cash added"}),Object(S.jsx)(h.a.Control,{type:"number",value:null===v?"":v,onChange:function(e){if(""!==e.target.value){var t=parseFloat(e.target.value);isNaN(t)||f(t)}else f(null)}}),Object(S.jsx)(h.a.Text,{className:"text-muted",children:w?"If you know (roughly) the total amount of cash that you have added in the lifetime of your account, you may enter it here. Otherwise, enter the total account value in both of these boxes.":"The amount of cash that you added to this account since the last investment that you recorded"})]}),Object(S.jsxs)(h.a.Group,{className:"mb-3",children:[Object(S.jsx)(h.a.Label,{children:"New total value"}),Object(S.jsx)(h.a.Control,{type:"number",value:null===y?"":y,onChange:function(e){if(""!==e.target.value){var t=parseFloat(e.target.value);isNaN(t)||C(t)}else C(null)}}),Object(S.jsx)(h.a.Text,{className:"text-muted",children:"The new total value of your account (including the cash that you have recently added)"})]})]})}),Object(S.jsxs)(j.a.Footer,{children:[Object(S.jsx)(l.a,{variant:"outline-secondary",onClick:s,children:"Cancel"}),Object(S.jsx)(l.a,{variant:"primary",onClick:function(e){e.preventDefault(),t(A({accountId:n,investment:{date:new Date(o).getTime(),cashAdded:v,totalValue:y}})),s()},disabled:null===v||null===y,children:"Add"})]})]})})},k=n(365),N=n(354),T=n(196),D=n(197),F=n(200),B=function(e){var t=e.title,n=e.data,c=e.lines,a=["#8884d8","#82ca9d"];return Object(S.jsxs)(S.Fragment,{children:[t&&Object(S.jsx)("h4",{children:t}),Object(S.jsxs)(N.a,{width:700,height:300,data:n,className:"mb-3 graph-wrapper",children:[Object(S.jsx)(T.a,{dataKey:"date",type:"number",domain:["0","dataMax"],tickFormatter:function(e){return new Date(e).toLocaleDateString()}}),Object(S.jsx)(D.a,{}),c.map((function(e,t){return Object(S.jsx)(F.a,{type:"monotone",dataKey:e,stroke:a[t]},e)}))]})]})},V=function(e){for(var t=b(),n=e.accountId,c=O((function(e){return e.account.accounts[n].investments})),a=c.map((function(e,t){return function(e){var t=c[e],n=0===e?0:c[e-1].totalValue;return 1+(t.totalValue-n-t.cashAdded)/(n+t.cashAdded)}(t)})).reduce((function(e,t){return e*t}),1)-1,s=c.map((function(e){return{date:e.date,cashAdded:e.cashAdded,totalValue:e.totalValue}})),i=s.length>0?(s[s.length-1].date-s[0].date)/864e5:365,r=i<365?a:Math.pow(1+a,365/i)-1,d=1;d<c.length;d++){var u=s[d],j=s[d-1];u.cashAdded+=j.cashAdded}return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"mb-3 col-sm-6",children:Object(S.jsxs)(k.a,{children:[Object(S.jsx)(k.a.Header,{children:Object(S.jsx)("div",{children:"Time-weighted return"})}),Object(S.jsx)(k.a.Body,{children:Object(S.jsx)("div",{children:Object(S.jsxs)("h1",{children:[(100*a).toFixed(2),"%"]})})})]})}),Object(S.jsx)("div",{className:"mb-3 col-sm-6",children:Object(S.jsxs)(k.a,{children:[Object(S.jsx)(k.a.Header,{children:Object(S.jsx)("div",{children:"Annualized return"})}),Object(S.jsx)(k.a.Body,{children:Object(S.jsx)("div",{children:Object(S.jsxs)("h1",{children:[(100*r).toFixed(2),"%"]})})})]})})]}),Object(S.jsx)(B,{data:s,lines:["cashAdded","totalValue"]}),Object(S.jsxs)(o.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Date"}),Object(S.jsx)("th",{children:"Cash added"}),Object(S.jsx)("th",{children:"Account value"}),Object(S.jsx)("th",{})]})}),Object(S.jsx)("tbody",{children:c.map((function(e,c){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),Object(S.jsxs)("td",{children:["$",e.cashAdded]}),Object(S.jsxs)("td",{children:["$",e.totalValue]}),Object(S.jsx)("td",{children:Object(S.jsx)(l.a,{onClick:function(){return t(C({accountId:n,investmentId:c}))},variant:"outline-danger",children:"Delete"})})]},"investment-".concat(n,"-").concat(c))}))})]})]})},H=function(e){var t=e.accountId,n=e.account,a=e.setIsShowingAccountDetails,s=Object(c.useState)(!1),i=Object(r.a)(s,2),d=i[0],o=i[1],u=void 0!==t;return void 0===n||void 0===t?Object(S.jsx)(S.Fragment,{}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(j.a,{show:u,onHide:a,children:[Object(S.jsxs)(j.a.Header,{children:[Object(S.jsx)(j.a.Title,{children:n.name}),Object(S.jsx)(l.a,{variant:"outline-success",onClick:function(){return o(!0)},children:"Add investment"}),Object(S.jsx)(l.a,{variant:"link",onClick:a,children:"Close"})]}),Object(S.jsxs)(j.a.Body,{children:[Object(S.jsx)("p",{children:n.description}),Object(S.jsx)(V,{accountId:t})]})]}),Object(S.jsx)(I,{accountId:t,isAddingInvestment:d,setIsAddingInvestment:function(){return o(!1)}})]})},G=Object(u.b)((function(e){return{accounts:e.account.accounts}}))((function(e){var t=e.accounts,n=Object(c.useState)(void 0),a=Object(r.a)(n,2),s=a[0],i=a[1],d=Object(c.useState)(!1),u=Object(r.a)(d,2),j=u[0],h=u[1],b=t.map((function(e){return 0===e.investments.length?void 0:e.investments[e.investments.length-1]}));return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(o.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"Account"}),Object(S.jsx)("th",{children:"Type"}),Object(S.jsx)("th",{children:"Value"}),Object(S.jsx)("th",{children:"Last update"}),Object(S.jsx)("th",{})]})}),Object(S.jsx)("tbody",{children:t.map((function(e,t){var n,c,a;return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e.name}),Object(S.jsx)("td",{children:e.isCash?"Cash":"Brokerage"}),Object(S.jsxs)("td",{children:["$",null===(n=b[t])||void 0===n?void 0:n.totalValue]}),Object(S.jsx)("td",{children:(a=null===(c=b[t])||void 0===c?void 0:c.date,void 0===a?"":new Date(a).toLocaleDateString())}),Object(S.jsxs)("td",{children:[Object(S.jsx)(l.a,{onClick:function(){i(t),h(!0)},variant:"primary",children:"Update"}),Object(S.jsx)(l.a,{className:"mx-3",onClick:function(){return i(t)},variant:"outline-primary",children:"Details"})]})]},"account-".concat(t))}))})]}),!j&&Object(S.jsx)(H,{accountId:s,account:void 0===s?void 0:t[s],setIsShowingAccountDetails:function(){return i(void 0)}}),void 0!==s&&Object(S.jsx)(I,{accountId:s,isAddingInvestment:j,setIsAddingInvestment:function(){h(!1),i(void 0)}})]})})),L=n(364),M=function(e){var t=e.isAddingAccount,n=e.setIsAddingAccount,a=Object(c.useState)(""),s=Object(r.a)(a,2),i=s[0],d=s[1],o=Object(c.useState)(""),u=Object(r.a)(o,2),O=u[0],x=u[1],m=Object(c.useState)(!1),v=Object(r.a)(m,2),f=v[0],g=v[1],p=b();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(j.a,{show:t,onHide:n,children:[Object(S.jsxs)(j.a.Header,{children:[Object(S.jsx)(j.a.Title,{children:"Add account"}),Object(S.jsx)(l.a,{variant:"link",onClick:n,children:"Close"})]}),Object(S.jsx)(j.a.Body,{children:Object(S.jsxs)(h.a,{children:[Object(S.jsxs)(h.a.Group,{className:"mb-3",children:[Object(S.jsx)(h.a.Label,{children:"Account name"}),Object(S.jsx)(h.a.Control,{type:"text",placeholder:"Robinhood cash account",value:i,onChange:function(e){return d(e.target.value)}})]}),Object(S.jsxs)(h.a.Group,{className:"mb-3",children:[Object(S.jsx)(h.a.Label,{children:"Account description"}),Object(S.jsx)(h.a.Control,{as:"textarea",type:"text",placeholder:"Description",value:O,onChange:function(e){return x(e.target.value)}}),Object(S.jsx)(h.a.Text,{className:"text-muted",children:"Optionally include a description of how you use your account"})]}),Object(S.jsx)(h.a.Group,{className:"mb-3",children:Object(S.jsx)(h.a.Check,{type:"checkbox",label:"This is a cash account",checked:f,onChange:function(e){return g(e.target.checked)}})}),Object(S.jsx)(l.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),d(""),x(""),p(y({name:i,description:O,isCash:f})),n()},disabled:0===i.length,children:"Add"})]})})]})})},P=n(144);n(348),n(351);P.a.initializeApp({apiKey:"AIzaSyB9hM-oSWTc3oXreGPSN0e7T4vKV22xCG4",authDomain:"piggy-17d8c.firebaseapp.com",projectId:"piggy-17d8c",storageBucket:"piggy-17d8c.appspot.com",messagingSenderId:"469740290881",appId:"1:469740290881:web:acdb15231211e3f29b17c0",measurementId:"G-0F7S2MSP04"});var z=P.a,E=n(359),W=function(e){var t=e.show,n=e.onHide,a=Object(c.useState)(""),s=Object(r.a)(a,2),i=s[0],d=s[1],o=Object(c.useState)(""),u=Object(r.a)(o,2),b=u[0],O=u[1],x=Object(c.useState)(void 0),m=Object(r.a)(x,2),v=m[0],f=m[1],g=Object(c.useState)(void 0),p=Object(r.a)(g,2),y=p[0],A=p[1],C=v?"Sign up":"Sign in";return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(j.a,{show:t,onHide:n,children:[Object(S.jsx)(j.a.Header,{children:Object(S.jsx)(j.a.Title,{children:C})}),Object(S.jsxs)(j.a.Body,{children:[y&&Object(S.jsx)(E.a,{variant:"danger",children:y}),Object(S.jsx)(l.a,{onClick:function(){return f(!0)},variant:"link",disabled:!0===v,children:"Make a new account"}),Object(S.jsx)(l.a,{onClick:function(){return f(!1)},variant:"link",disabled:!1===v,children:"Sign into existing account"}),void 0!==v&&Object(S.jsxs)(h.a,{children:[Object(S.jsxs)(h.a.Group,{className:"mb-3",children:[Object(S.jsx)(h.a.Label,{children:"Email"}),Object(S.jsx)(h.a.Control,{type:"email",value:i,onChange:function(e){return d(e.target.value)}})]}),Object(S.jsxs)(h.a.Group,{className:"mb-3",children:[Object(S.jsx)(h.a.Label,{children:"Password"}),Object(S.jsx)(h.a.Control,{type:"password",value:b,onChange:function(e){return O(e.target.value)}})]}),Object(S.jsx)(l.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),(v?z.auth().createUserWithEmailAndPassword(i,b):z.auth().signInWithEmailAndPassword(i,b)).then((function(e){d(""),O(""),n()})).catch((function(e){A(e.message)}))},disabled:0===i.length||0===b.length,children:C})]})]})]})})},$=function(e){var t=e.user,n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(!1),u=Object(r.a)(o,2),j=u[0],h=u[1],b=O((function(e){return e.account})),x=function(e){e&&e.preventDefault(),localStorage.setItem("accounts",JSON.stringify(b.accounts)),t&&b.accounts.length>0&&z.firestore().collection("users").doc(t).set(b)};return Object(c.useEffect)((function(){x(void 0)})),Object(S.jsxs)(L.a,{bg:"light",expand:"lg",className:"mb-3",children:[Object(S.jsxs)(d.a,{className:"justify-content-between",children:[Object(S.jsx)(l.a,{variant:"primary",onClick:function(){return i(!0)},children:"Add account"}),Object(S.jsxs)("div",{children:[t?Object(S.jsx)(l.a,{className:"mx-3",onClick:function(){return z.auth().signOut()},children:"Sign out"}):Object(S.jsx)(l.a,{onClick:function(){return h(!0)},children:"Sign in"}),Object(S.jsx)(l.a,{variant:"outline-success",onClick:x,children:"Save"})]})]}),Object(S.jsx)(W,{show:j,onHide:function(){return h(!1)}}),Object(S.jsx)(M,{isAddingAccount:s,setIsAddingAccount:function(){return i(!1)}})]})},J=function(){for(var e=O((function(e){return e.account.accounts.filter((function(e){return e.investments.length>0}))})),t=e.filter((function(e){return!e.isCash})).reduce((function(e,t){return e.concat(t.investments)}),[]).sort((function(e,t){return e.date-t.date})),n=t.map((function(e,n){return function(e){var n=t[e],c=0===e?0:t[e-1].totalValue;return 1+(n.totalValue-c-n.cashAdded)/(c+n.cashAdded)}(n)})).reduce((function(e,t){return e*t}),1)-1,c=t.map((function(e){return{date:e.date,cashAdded:e.cashAdded,totalValue:e.totalValue}})),a=c.length>0?(c[c.length-1].date-c[0].date)/31536e6:0,s=100*(0===a?n:Math.pow(1+n,1/a)-1),i=1;i<t.length;i++){var r=c[i],d=c[i-1];r.cashAdded+=d.cashAdded}var o=e.filter((function(e){return e.isCash})),l=o.reduce((function(e,t){return e.concat(t.investments)}),[]).sort((function(e,t){return e.date-t.date})),u=o.map((function(e){return e.investments.length>0?e.investments[e.investments.length-1].totalValue:0})).reduce((function(e,t){return e+t}),0);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"mb-3 col-sm-4",children:Object(S.jsxs)(k.a,{children:[Object(S.jsx)(k.a.Header,{children:Object(S.jsx)("div",{children:"Time-weighted return"})}),Object(S.jsx)(k.a.Body,{children:Object(S.jsx)("div",{children:Object(S.jsxs)("h1",{children:[(100*n).toFixed(2),"%"]})})})]})}),Object(S.jsx)("div",{className:"mb-3 col-sm-4",children:Object(S.jsxs)(k.a,{children:[Object(S.jsx)(k.a.Header,{children:Object(S.jsx)("div",{children:"Annualized return"})}),Object(S.jsx)(k.a.Body,{children:Object(S.jsx)("div",{children:Object(S.jsxs)("h1",{children:[s.toFixed(2),"%"]})})})]})}),Object(S.jsx)("div",{className:"mb-3 col-sm-4",children:Object(S.jsxs)(k.a,{children:[Object(S.jsx)(k.a.Header,{children:Object(S.jsx)("div",{children:"Cash on hand"})}),Object(S.jsx)(k.a.Body,{children:Object(S.jsx)("div",{children:Object(S.jsxs)("h1",{children:["$",u]})})})]})})]}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6",children:Object(S.jsx)(B,{title:"Brokerage",data:c,lines:["cashAdded","totalValue"]})}),Object(S.jsx)("div",{className:"col-sm-6",children:Object(S.jsx)(B,{title:"Cash",data:l,lines:["totalValue"]})})]})]})},K=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],a=t[1],s=b();return Object(c.useEffect)((function(){n&&z.firestore().collection("users").doc(n).onSnapshot((function(e){e.exists&&!e.metadata.hasPendingWrites&&s(p({state:e.data()}))}))}),[n]),z.auth().onAuthStateChanged((function(e){a(e?e.uid:null)})),Object(S.jsxs)("div",{children:[Object(S.jsx)($,{user:n}),Object(S.jsxs)(d.a,{children:[Object(S.jsx)(J,{}),Object(S.jsx)(G,{})]})]})},R=n(78),U=n.n(R),X=n(198);function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var Q=Object(m.b)("counter/fetchCount",function(){var e=Object(X.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=Object(m.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(Q.pending,(function(e){e.status="loading"})).addCase(Q.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),Z=Y.actions,_=(Z.increment,Z.decrement,Z.incrementByAmount,Y.reducer),ee=Object(m.a)({reducer:{counter:_,account:w}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(u.a,{store:ee,children:Object(S.jsx)(K,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[350,1,2]]]);
//# sourceMappingURL=main.0d182ca3.chunk.js.map